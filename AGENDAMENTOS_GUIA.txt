================================================================================
SISTEMA COMPLETO DE AGENDAMENTOS - GUIA DE IMPLEMENTAÃ‡ÃƒO
================================================================================

ðŸŽ¯ O QUE FOI IMPLEMENTADO:

1. TABELAS NO SUPABASE
   - therapist_availability: HorÃ¡rios de atendimento do terapeuta
   - appointments: Agendamentos (sessÃµes)
   - appointment_recurrences: RecorrÃªncias (semanal, quinzenal, mensal)
   - appointment_requests: SolicitaÃ§Ãµes de agendamento do paciente

2. HOOKS CUSTOMIZADOS
   - useTherapistAvailability: Gerencia horÃ¡rios de atendimento
   - useAppointmentRecurrences: Gerencia recorrÃªncias
   - useAppointmentRequests: Gerencia solicitaÃ§Ãµes de pacientes

3. COMPONENTES
   - Calendar: CalendÃ¡rio reutilizÃ¡vel com 3 visualizaÃ§Ãµes (mÃªs, semana, dia)
   - ScheduleManager: Tela completa para terapeutas gerenciarem agenda

4. FUNCIONALIDADES PARA TERAPEUTAS
   âœ“ Visualizar calendÃ¡rio com 3 modos (mensal, semanal, diÃ¡rio)
   âœ“ Criar agendamentos diretos com pacientes
   âœ“ Criar agendamentos com recorrÃªncia (semanal, quinzenal, mensal)
   âœ“ Configurar horÃ¡rios de atendimento disponÃ­veis
   âœ“ Aprovar/rejeitar solicitaÃ§Ãµes de pacientes
   âœ“ Ver horÃ¡rios ocupados no calendÃ¡rio

5. FUNCIONALIDADES PARA PACIENTES
   âœ“ Solicitar agendamento com terapeuta
   âœ“ Ver status da solicitaÃ§Ã£o (pendente, aprovada, rejeitada)
   âœ“ Cancelar solicitaÃ§Ã£o pendente
   âœ“ Ver agendamentos confirmados

================================================================================
PASSO 1: EXECUTAR SQL NO SUPABASE
================================================================================

1. Acesse: https://app.supabase.com
2. VÃ¡ para: SQL Editor
3. Copie todo o conteÃºdo do arquivo: AGENDAMENTOS_SETUP.sql
4. Cole no editor SQL
5. Clique em "Run"

Isso vai criar:
- 4 tabelas novas
- Ãndices para performance
- PolÃ­ticas RLS
- FunÃ§Ã£o para gerar recorrÃªncias
- Triggers para atualizar datas

================================================================================
PASSO 2: TESTAR NO FRONTEND
================================================================================

PARA TERAPEUTA:
1. FaÃ§a login com conta de terapeuta
2. VÃ¡ para: Dashboard > Gerenciar Agenda
3. Clique na aba "HorÃ¡rios de Atendimento"
4. Adicione seus horÃ¡rios disponÃ­veis (ex: Segunda 09:00-12:00)
5. Clique na aba "CalendÃ¡rio"
6. Clique em "+ Novo Agendamento"
7. Selecione um paciente, data, hora e recorrÃªncia
8. Clique em "Criar Agendamento"
9. VÃ¡ para aba "SolicitaÃ§Ãµes" para ver solicitaÃ§Ãµes de pacientes
10. Clique em "Aprovar" ou "Rejeitar"

PARA PACIENTE:
1. FaÃ§a login com conta de paciente
2. VÃ¡ para: Dashboard > Agendamentos
3. Clique em "+ Novo Agendamento"
4. Selecione um terapeuta
5. Escolha data e horÃ¡rio
6. Adicione motivo (opcional)
7. Clique em "Enviar SolicitaÃ§Ã£o"
8. Veja o status em "Minhas SolicitaÃ§Ãµes"

================================================================================
ESTRUTURA DE ARQUIVOS CRIADOS
================================================================================

/hooks/
  â”œâ”€â”€ useTherapistAvailability.ts     (Gerencia horÃ¡rios)
  â”œâ”€â”€ useAppointmentRecurrences.ts    (Gerencia recorrÃªncias)
  â””â”€â”€ useAppointmentRequests.ts       (Gerencia solicitaÃ§Ãµes)

/components/
  â”œâ”€â”€ calendar/
  â”‚   â””â”€â”€ Calendar.tsx                (CalendÃ¡rio reutilizÃ¡vel)
  â””â”€â”€ therapist/
      â””â”€â”€ ScheduleManager.tsx         (Tela de gerenciamento)

/components/patient/
  â””â”€â”€ Appointments.tsx                (Atualizado com solicitaÃ§Ãµes)

================================================================================
FLUXO DE AGENDAMENTO
================================================================================

FLUXO 1: TERAPEUTA CRIA AGENDAMENTO DIRETO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Terapeuta acessa ScheduleManager                         â”‚
â”‚ 2. Clica em "+ Novo Agendamento"                            â”‚
â”‚ 3. Seleciona paciente, data, hora                           â”‚
â”‚ 4. Escolhe recorrÃªncia (nenhuma, semanal, quinzenal, mensal)â”‚
â”‚ 5. Sistema cria agendamento com status "confirmed"          â”‚
â”‚ 6. Agendamento aparece no calendÃ¡rio                        â”‚
â”‚ 7. Paciente vÃª agendamento confirmado em seus agendamentos  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FLUXO 2: PACIENTE SOLICITA AGENDAMENTO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Paciente acessa Agendamentos                             â”‚
â”‚ 2. Clica em "+ Novo Agendamento"                            â”‚
â”‚ 3. Seleciona terapeuta, data, hora, motivo                  â”‚
â”‚ 4. Clica em "Enviar SolicitaÃ§Ã£o"                            â”‚
â”‚ 5. SolicitaÃ§Ã£o fica com status "pending"                    â”‚
â”‚ 6. Terapeuta vÃª em aba "SolicitaÃ§Ãµes"                       â”‚
â”‚ 7. Terapeuta clica "Aprovar" ou "Rejeitar"                  â”‚
â”‚ 8. Se aprovada: cria agendamento confirmado                 â”‚
â”‚ 9. Paciente vÃª status atualizado                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
RECORRÃŠNCIAS
================================================================================

Tipos de recorrÃªncia disponÃ­veis:
- SEMANAL: Repete todo semana no mesmo dia e hora
- BIWEEKLY (A cada 2 semanas): Repete a cada 15 dias
- MONTHLY (Mensal): Repete no mesmo dia do mÃªs

Exemplo:
- InÃ­cio: 2024-01-15 (segunda)
- Fim: 2024-12-31
- FrequÃªncia: Semanal
- HorÃ¡rio: 09:00 - 10:00

Resultado: Agendamentos toda segunda de 09:00-10:00 atÃ© 31/12/2024

================================================================================
VISUALIZAÃ‡Ã•ES DO CALENDÃRIO
================================================================================

VISTA MENSAL:
- Mostra todo o mÃªs em grid
- Cada dia mostra atÃ© 2 agendamentos
- Clique em um dia para criar novo agendamento
- Clique em um agendamento para ver detalhes

VISTA SEMANAL:
- Mostra 7 dias (segunda a domingo)
- Cada dia em coluna separada
- Todos os agendamentos da semana visÃ­veis
- Clique em um dia para criar novo agendamento

VISTA DIÃRIA:
- Mostra um dia em detalhes
- Agendamentos organizados por hora
- HorÃ¡rios de 00:00 a 23:00
- Clique em um agendamento para ver detalhes

================================================================================
CORES DOS AGENDAMENTOS
================================================================================

VERDE (Confirmed):     Agendamento confirmado
AMARELO (Pending):     Agendamento pendente de confirmaÃ§Ã£o
AZUL (Completed):      Agendamento concluÃ­do
VERMELHO (Cancelled):  Agendamento cancelado

================================================================================
PRÃ“XIMOS PASSOS (OPCIONAL)
================================================================================

1. Adicionar notificaÃ§Ãµes por email quando:
   - Paciente solicita agendamento
   - Terapeuta aprova/rejeita solicitaÃ§Ã£o
   - Agendamento Ã© criado

2. Adicionar lembretes:
   - 24 horas antes do agendamento
   - 1 hora antes do agendamento

3. Adicionar funcionalidade de:
   - Reagendar agendamento
   - Cancelar agendamento
   - Adicionar notas ao agendamento

4. Adicionar relatÃ³rios:
   - Agendamentos por paciente
   - Taxa de confirmaÃ§Ã£o
   - HorÃ¡rios mais procurados

5. Integrar com:
   - Google Calendar
   - Outlook Calendar
   - iCal

================================================================================
TROUBLESHOOTING
================================================================================

PROBLEMA: NÃ£o consigo criar agendamento
SOLUÃ‡ÃƒO: 
- Verifique se o paciente existe
- Verifique se a data estÃ¡ no futuro
- Verifique se o horÃ¡rio Ã© vÃ¡lido (fim > inÃ­cio)

PROBLEMA: RecorrÃªncia nÃ£o estÃ¡ gerando agendamentos
SOLUÃ‡ÃƒO:
- Execute a funÃ§Ã£o: SELECT generate_recurring_appointments();
- Verifique se a data de fim Ã© vÃ¡lida
- Verifique se a frequÃªncia estÃ¡ correta

PROBLEMA: NÃ£o vejo solicitaÃ§Ãµes de pacientes
SOLUÃ‡ÃƒO:
- Verifique se estÃ¡ logado como terapeuta
- Verifique se o paciente estÃ¡ associado ao terapeuta
- Recarregue a pÃ¡gina

PROBLEMA: CalendÃ¡rio nÃ£o atualiza em tempo real
SOLUÃ‡ÃƒO:
- Recarregue a pÃ¡gina
- Verifique conexÃ£o com Supabase
- Verifique se o WebSocket estÃ¡ ativo

================================================================================
SUPORTE
================================================================================

Para dÃºvidas ou problemas:
1. Verifique os logs do navegador (F12 > Console)
2. Verifique os logs do Supabase (Logs > Postgres)
3. Verifique as polÃ­ticas RLS (Authentication > Policies)
4. Verifique se as tabelas foram criadas corretamente

================================================================================
