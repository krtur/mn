============================================
ğŸ‰ DEPLOY CONCLUÃDO COM SUCESSO!
============================================

âœ… SEU SITE ESTÃ NO AR!
ğŸŒ http://31.97.252.100

============================================
ğŸ“Š O QUE FOI CONFIGURADO
============================================

âœ… Node.js 20 LTS instalado
âœ… Nginx configurado e rodando
âœ… Projeto clonado do GitHub
âœ… DependÃªncias instaladas
âœ… Build realizado com sucesso
âœ… Firewall configurado
âœ… Webhook listener instalado
âœ… VariÃ¡veis de ambiente (.env) configuradas
âœ… Script de deploy automÃ¡tico criado

============================================
ğŸ” CREDENCIAIS E INFORMAÃ‡Ã•ES
============================================

VPS:
- IP: 31.97.252.100
- UsuÃ¡rio: root
- Senha: Taliteus@1202

GitHub:
- RepositÃ³rio: https://github.com/krtur/mn
- Branch: main

Webhook Secret:
c07e7eaa5d8bab70edf4b3acb837f9426ce96fbbd12ee2b270821cecb11b19b8

Supabase:
- URL: https://ygfxloachqjeslciyunr.supabase.co
- Key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

============================================
âš ï¸ ÃšLTIMO PASSO: CONFIGURAR WEBHOOK GITHUB
============================================

Para ativar o deploy automÃ¡tico, configure o webhook:

1. Acesse: https://github.com/krtur/mn/settings/hooks

2. Clique em "Add webhook"

3. Preencha os campos:

   Payload URL:
   http://31.97.252.100:9000/hooks/mn-deploy

   Content type:
   application/json

   Secret:
   c07e7eaa5d8bab70edf4b3acb837f9426ce96fbbd12ee2b270821cecb11b19b8

   SSL verification:
   Disable SSL verification (por enquanto)

   Which events would you like to trigger this webhook?
   â—‹ Just the push event

   Active:
   â˜‘ Active

4. Clique em "Add webhook"

5. Teste fazendo um commit:
   git commit -m "teste deploy automÃ¡tico" --allow-empty
   git push origin main

============================================
ğŸ§ª TESTAR DEPLOY AUTOMÃTICO
============================================

1. FaÃ§a uma alteraÃ§Ã£o no cÃ³digo:
   echo "# Teste" >> README.md

2. Commit e push:
   git add .
   git commit -m "teste"
   git push origin main

3. Aguarde 2-3 minutos

4. Recarregue o site: http://31.97.252.100

5. Ver logs do deploy no VPS:
   ssh root@31.97.252.100
   journalctl -u webhook -f

============================================
ğŸ“Š COMANDOS ÃšTEIS
============================================

Conectar ao VPS:
ssh root@31.97.252.100

Ver logs do webhook (deploy):
journalctl -u webhook -f

Ver logs do Nginx:
tail -f /var/log/nginx/error.log

Deploy manual:
/var/www/mn/deploy.sh

Reiniciar serviÃ§os:
systemctl restart webhook nginx

Ver status:
systemctl status webhook nginx

Editar .env:
nano /var/www/mn/.env

============================================
ğŸ”„ COMO FUNCIONA O DEPLOY AUTOMÃTICO
============================================

1. VocÃª faz commit e push no GitHub
2. GitHub envia notificaÃ§Ã£o para o webhook
3. Webhook executa /var/www/mn/deploy.sh
4. Script faz:
   - git pull origin main
   - npm install
   - npm run build
   - systemctl restart nginx
5. Site atualizado automaticamente!

â±ï¸ Tempo total: ~2-3 minutos

============================================
ğŸ“ ESTRUTURA NO VPS
============================================

/var/www/mn/              # Projeto
â”œâ”€â”€ dist/                 # Build (servido pelo Nginx)
â”œâ”€â”€ src/                  # CÃ³digo fonte
â”œâ”€â”€ .env                  # VariÃ¡veis de ambiente
â”œâ”€â”€ deploy.sh             # Script de deploy
â””â”€â”€ ...

/var/www/webhook/         # Webhook
â””â”€â”€ hooks.json            # ConfiguraÃ§Ã£o

/etc/nginx/
â”œâ”€â”€ sites-available/
â”‚   â”œâ”€â”€ mn                # Config do site
â”‚   â””â”€â”€ webhook           # Config do webhook
â””â”€â”€ sites-enabled/        # Links simbÃ³licos

============================================
ğŸ”’ SEGURANÃ‡A (RECOMENDAÃ‡Ã•ES FUTURAS)
============================================

âœ… JÃ¡ configurado:
- Firewall UFW ativo
- Portas 22, 80, 9000 abertas
- SSH funcionando

ğŸ”œ Melhorias futuras:
- [ ] Adicionar SSL/HTTPS (Let's Encrypt)
- [ ] Configurar domÃ­nio prÃ³prio
- [ ] Criar usuÃ¡rio nÃ£o-root
- [ ] Desabilitar login root via SSH
- [ ] Configurar chaves SSH
- [ ] Instalar Fail2Ban
- [ ] Configurar backups automÃ¡ticos

============================================
ğŸ†˜ PROBLEMAS COMUNS
============================================

PROBLEMA: Site nÃ£o carrega
SOLUÃ‡ÃƒO:
  ssh root@31.97.252.100
  systemctl restart nginx
  systemctl status nginx

PROBLEMA: Webhook nÃ£o funciona
SOLUÃ‡ÃƒO:
  ssh root@31.97.252.100
  systemctl status webhook
  journalctl -u webhook -n 50

PROBLEMA: Deploy nÃ£o atualiza
SOLUÃ‡ÃƒO:
  ssh root@31.97.252.100
  /var/www/mn/deploy.sh
  # Veja os erros e corrija

PROBLEMA: Erro 502 Bad Gateway
SOLUÃ‡ÃƒO:
  ssh root@31.97.252.100
  systemctl restart nginx
  tail -f /var/log/nginx/error.log

============================================
ğŸ“š DOCUMENTAÃ‡ÃƒO COMPLETA
============================================

Arquivos criados:
- vps-setup.sh              # Script de instalaÃ§Ã£o
- DEPLOY_VPS_GUIA.txt       # Guia completo
- COMANDOS_RAPIDOS.txt      # ReferÃªncia rÃ¡pida
- COMECE_AQUI_VPS.txt       # InÃ­cio rÃ¡pido
- DEPLOY_CONCLUIDO.txt      # Este arquivo

============================================
âœ… CHECKLIST FINAL
============================================

[âœ…] VPS configurado
[âœ…] Node.js instalado
[âœ…] Nginx rodando
[âœ…] Projeto clonado
[âœ…] Build realizado
[âœ…] .env configurado
[âœ…] Webhook instalado
[âœ…] Secret gerado
[âœ…] Site acessÃ­vel
[â³] Webhook GitHub configurado (FAÃ‡A AGORA!)

============================================
ğŸ‰ PARABÃ‰NS!
============================================

Seu projeto M&N Terapeutas estÃ¡ no ar!

ğŸŒ Acesse: http://31.97.252.100

Agora Ã© sÃ³ configurar o webhook no GitHub
e vocÃª terÃ¡ deploy automÃ¡tico a cada commit!

Qualquer dÃºvida, consulte os arquivos de
documentaÃ§Ã£o ou execute os comandos Ãºteis.

Bom trabalho! ğŸš€
